.pushmode section

{Prologue}      |||h id=prologue

This is just me documenting while I have fun attempting to reverse-engineer the game
Need For Speed Underground 2, otherwise knows as nfsu2.

This normally belongs to {https://github.com/yugecin/nfsu2-re}.                                 |||a class=ext

.popmode section
.pushmode section

{How this site is structured} ||| h id=structure

.pushmode ul
- {index}: information about this project, you're looking at it                                 ||| a href=index.html
- {blog}: documenting explorations or findings that don't really belong in the docs section     ||| a href=blog.html
  and other random things
- {docs}: structured documentation explaining concepts and game workings                        ||| a href=docs.html
- {functions}: function symbols information dump, see {generationnotes}                         ||| a href=funcs.html,href
- {structs}: struct symbols information dump, see {generationnotes}                             ||| a href=structs.html,href
- {enums}: enum symbols information dump, see {generationnotes}                                 ||| a href=enums.html,href
- {vars}: global variable symbols information dump, see {generationnotes}                       ||| a href=vars.html,href
- {cheatsheet}: bunch of things I tend to forget when looking at disassembled code              ||| a href=cheatsheet.html
.popmode ul

.popmode section
.pushmode section

{Injected code}         |||h id=injectedcode

The code for all injected things I did can be found in {nfsu2-re-hooks/*.c}.                    |||code
It's configured as a VC2005 project in a VC2005 solution.
The project emits a compiled file to {..\NeedForSpeed U2\scripts\nfsu2-re-hooks.asi}.           |||code
I'm using the {Ultimate ASI Loader by ThirteenAG},                                              |||a class=ext href=https://github.com/ThirteenAG/Ultimate-ASI-Loader/releases
which loads the library nicely for me (download the ZIP and place the dll in the game folder,
name it {dinput8.dll}).                                                                         |||code

.popmode section
.pushmode section

{Symbol generation notes}  ||| h id=generationnotes

Symbol information ({functions}, {structs}, {enums}, {vars}) is generated from the              ||| a href=funcs.html,a href=structs.html,a href=enums.html,a href=vars.html
{SPEED2.idc} file which can be found on the {idc branch of the repository}.                     ||| code,a class=ext href=https://github.com/yugecin/nfsu2-re/tree/idc
This file is generated by {IDA - The Interactive Disassembler} from the IDA database that I'm   ||| a class=ext href=https://hex-rays.com
making (this database is not shared, but the idc file has nearly everything).
I'm using IDA freeware 7.7.220118.

.pushmode section

{Global variables are missing types} ||| h id=variablegeneration

The generated idc file does not contain type information of global variables when that type
is a pointer. One example is {838454}, which has type {{struct SmsData}*}, but this information ||| ref,code,ref
is missing from the idc and thus in these docs it shows up as {int} with                        ||| code
{{/*unconfirmed type*/}}.                                                                       ||| code,span class=uctype

The same counts for some primitive types like {int}, for example {838450}.                      ||| code,ref

Some other types do show up correctly, like when the type is a struct or {float} or {double},   ||| code,code
for example {827CC4}.                                                                           ||| ref

.popmode section
.pushmode section

{Unconfirmed struct member types} ||| h id=uncstructmembertypes

In IDA, the difference between a struct member that has a type set and a struct member that
has no type set is not very visible. Because of that, some struct members might be missing
an explicit type, because it is simply forgotten to set their type correctly. The type shown
will still most likely be correct, as the struct member's size may be translated into {char}    ||| code
or {short} or {int}, but it will have an {{/*unconfirmed type*/}} tag.                          ||| code,code,code,span class=uctype

.popmode section
.popmode section

{{(old single-page documentation, obsolete)}} ||| p,a href=indexold.html rel=nofollow
